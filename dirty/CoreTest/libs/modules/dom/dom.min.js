var egret;!function(e){var t;!function(t){function i(e,t){var i=document.createElement("canvas");isNaN(e)||isNaN(t)||(i.width=e,i.height=t);var r=i.getContext("2d");if(void 0===r.imageSmoothingEnabled){for(var n=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=n.length-1;a>=0;a--){var s=n[a];if(void 0!==r[s])break}try{Object.defineProperty(r,"imageSmoothingEnabled",{get:function(){return this[s]},set:function(e){this[s]=e}})}catch(h){r.imageSmoothingEnabled=r[s]}}return i}var r=i(),n=function(){function e(e,t){this.surface=i(e,t),this.context=this.surface.getContext("2d")}var t=__define,n=e,a=n.prototype;return t(a,"width",function(){return this.surface.width}),t(a,"height",function(){return this.surface.height}),a.resize=function(e,t,i){var r=this.surface;if(i){var n=!1;r.width<e&&(r.width=e,n=!0),r.height<t&&(r.height=t,n=!0),n||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else r.width!=e&&(r.width=e),r.height!=t&&(r.height=t);this.clear()},a.resizeTo=function(e,t,i,n){var a=(this.context,this.surface),s=r,h=s.getContext("2d");r=a,this.context=h,this.surface=s,s.width=Math.max(e,257),s.height=Math.max(t,257),h.setTransform(1,0,0,1,0,0),h.drawImage(a,i,n),a.height=1,a.width=1},a.beginClip=function(e,t,i){t=+t||0,i=+i||0;var r=this.context;r.save(),r.beginPath(),r.setTransform(1,0,0,1,t,i);for(var n=e.length,a=0;n>a;a++){var s=e[a];r.clearRect(s.minX,s.minY,s.width,s.height),r.rect(s.minX,s.minY,s.width,s.height)}r.clip()},a.endClip=function(){this.context.restore()},a.getPixel=function(e,t){return this.context.getImageData(e,t,1,1).data},a.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},a.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},a.destroy=function(){this.surface.width=this.surface.height=0},e}();t.DOMRenderBuffer=n,e.registerClass(n,"egret.web.DOMRenderBuffer",["egret.sys.RenderBuffer"]),e.sys.hitTestBuffer=new n(3,3)}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=[],r=function(){function e(){this.nestLevel=0}var t=(__define,e),r=t.prototype;return r.render=function(e,t,r,n,a){this.nestLevel++;var s=t.context,h=a?e:null,o=this.drawDisplayObject(e,s,n,r,null,null,h);if(this.nestLevel--,0===this.nestLevel){i.length>6&&(i.length=6);for(var c=i.length,f=0;c>f;f++)i[f].resize(0,0)}return o},r.drawDisplayObject=function(e,t,i,r,n,a,s){var h,o=0;if(n&&!s?(n.isDirty&&(o+=n.drawToSurface()),h=n.$renderNode):h=e.$getRenderNode(),h&&h.needRedraw&&console.log(e.$hashCode),n&&!s)return o;var c=e.$children;if(c)for(var f=c.length,u=0;f>u;u++){var d=c[u];!d.$visible||d.$alpha<=0||d.$maskedObject||0!==d.$blendMode||d.$mask&&(d.$mask.$parentDisplayList||s)||d.$scrollRect||d.$maskRect||d.isFPS||(o+=this.drawDisplayObject(d,t,i,r,d.$displayList,a,s))}return o},r.drawNodeToBuffer=function(e,t,i,r){},e}();t.DOMRenderer=r,e.registerClass(r,"egret.web.DOMRenderer",["egret.sys.SystemRenderer"])}(t=e.web||(e.web={}))}(egret||(egret={}));